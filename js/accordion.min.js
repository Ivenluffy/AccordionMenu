<<<<<<< HEAD
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=e||self,e.Accordion=t())})(this,function(){"use strict";function extend(e,t,n){n=typeof n==="undefined"?true:toBool(n);for(var i in t){if(e.hasOwnProperty(i)&&!n)continue;e[i]=t[i]}return e}function toBool(e){return typeof e==="string"&&e.toLowerCase()==="false"?false:Boolean(e)}function addEvent(e,t,n,i){i=toBool(i);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n,i):e["on"+t]=n}function removeEvent(e,t,n,i){i=toBool(i);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n,i)}function parseObj(e,t){if(e&&typeof e==="object"){return e}else if(e&&typeof e==="string"){try{return JSON.parse(e)}catch(e){console.error(e.message)}}else{return t||null}}function copyObj(e){return JSON.parse(JSON.stringify(e))}function createRequest(){if(window.XMLHttpRequest){return new XMLHttpRequest}else if(window.ActiveXObject){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var t=0;t<e.length;t++){try{return new ActiveXObject(e[t])}catch(e){}}}return null}function gradientColors(e,t,n){var i=g(e);var r=i[0];var o=i[1];var s=i[2];var a=g(t);var l=a[0];var u=a[1];var d=a[2];var c=(l-r)/n;var p=(u-o)/n;var f=(d-s)/n;var h=[];for(var m=0;m<n;m++){var v=y("rgb("+parseInt(c*m+r)+","+parseInt(p*m+o)+","+parseInt(f*m+s)+")");h.push(v)}return h;function g(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var e=e.toLowerCase();if(e&&t.test(e)){if(e.length===4){var n="#";for(var i=1;i<4;i+=1){n+=e.slice(i,i+1).concat(e.slice(i,i+1))}e=n}var r=[];for(var i=1;i<7;i+=2){r.push(parseInt("0x"+e.slice(i,i+2)))}return r}else{return e}}function y(e){var t=e;var n=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(t)){var i=t.replace(/(?:(|)|rgb|RGB)*/g,"").split(",");var r="#";for(var o=0;o<i.length;o++){var s=Number(i[o]).toString(16);s=s<10?0+""+s:s;if(s==="0"){s+=s}r+=s}if(r.length!==7){r=t}return r}else if(n.test(t)){var a=t.replace(/#/,"").split("");if(a.length===6){return t}else if(a.length===3){var l="#";for(var o=0;o<a.length;o+=1){l+=a[o]+a[o]}return l}}else{return t}}}function sortTreeArr(e,t,n,i){i=i||"asc";if(!n)return e;var r=1;if(i&&i.toLowerCase()=="desc")r=-1;for(var o=0;o<e.length;o++){if(e[o][t])sortTreeArr(e[o][t],t,n,i)}sortArr(e,i,n);return e}function sortArr(e,t,r){r=r||"";var o=1;if(t&&t.toLowerCase()=="desc")o=-1;e.sort(function(e,t){var n,i;n=r?e[r]:e;i=r?t[r]:t;if(n>i){return 1*o}else if(n<i){return-1*o}else{return 0*o}});return e}HTMLElement.prototype.elData=function(e,t){var n="_elData",i=typeof e,r=typeof t;e=i==="string"?e.trim():e;if(i!=="undefined"&&r!=="undefined"){if(e===null||i==="number"||i==="boolean"){return this}if(!(n in this)){this[n]={}}this[n][e]=t;return this}if(i==="undefined"&&r==="undefined"){return this[n]||{}}if(i!=="undefined"&&r==="undefined"){return n in this&&e in this[n]?this[n][e]:undefined}};HTMLElement.prototype.delElData=function(e){var t=typeof e,n="_elData";e=t==="string"?e.trim():e;if(e===null||t==="number"||t==="boolean"){return this}if(t==="undefined"){if(n in this)delete this[n]}else{if(n in this&&e in this[n])delete this[n][e]}return this};HTMLElement.prototype.slideDown=function(e){var t=window.getComputedStyle?getComputedStyle(this,null)["display"]:this.currentStyle["display"];if(t==="none"){this.style.cssText="height:0;display:block"}var n=0,i=this.scrollHeight,r=this,o=(e?i/e:i/400)*30;if(!this.offsetHeight){var s=setInterval(function(){if(n===i){clearInterval(s);r.style.cssText="display:block"}else{n+=o;n=n>i?i:n;r.style.height=n+"px"}},30)}};HTMLElement.prototype.slideUp=function(e){var t=0,n=this.scrollHeight,i=this,r=(e?n/e:n/400)*30;if(this.offsetHeight){var o=setInterval(function(){if(n===t){clearInterval(o);i.style.cssText="display:none"}else{n-=r;n=n<t?t:n;i.style.height=n+"px"}},30)}};function Accordion(e,t){if(!(this instanceof Accordion)){return new Accordion(e,t)}this.menu=typeof e==="string"?document.querySelector(e):(typeof HTMLElement==="object"?e instanceof HTMLElement:e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string")?e:null;this.options={};this.menu.classList.add("accordion");this.init(t)}Accordion.prototype={constructor:Accordion,init:function(options){var lastOpts=this.menu.elData("lastOpts"),menu=this.menu;this.options=lastOpts||{idField:menu.getAttribute("idField")||"id",parentField:menu.getAttribute("parentField")||"pid",nameField:menu.getAttribute("nameField")||"name",iconField:menu.getAttribute("iconField")||"",sortName:menu.getAttribute("sortName")||"",sortOrder:menu.getAttribute("sortOrder")||"asc",childrenField:menu.getAttribute("childrenField")||"children",url:menu.getAttribute("url")||"",ajaxType:menu.getAttribute("ajaxType")||"get",ajaxData:menu.getAttribute("ajaxData")||null,asTreeData:menu.getAttribute("asTreeData")?toBool(menu.getAttribute("asTreeData")):true,data:menu.getAttribute("data")||null,indentStep:menu.getAttribute("indentStep")||1,startColor:menu.getAttribute("startColor")||"#18626b",endColor:menu.getAttribute("endColor")||"#2fb9ca",colorCount:menu.getAttribute("colorCount")||5,speed:menu.getAttribute("speed")||400,onnodeclick:eval(menu.getAttribute("onnodeclick"))||null,onnodemouseenter:eval(menu.getAttribute("onnodemouseenter"))||null,onnodemouseleave:eval(menu.getAttribute("onnodemouseleave"))||null,onmenuready:eval(menu.getAttribute("onmenuready"))||null};this.options=extend(this.options,options||{},true);var opts=this.options,_this=this,colorList=gradientColors(opts.startColor,opts.endColor,opts.colorCount);setOpts();render();bindEvent();return this;function setOpts(){opts.ajaxData=parseObj(opts.ajaxData);opts.data=parseObj(opts.data);if(!opts.data){urlGetData()}opts.data=getFmtData(opts.asTreeData);if(opts.asTreeData){menu.elData("tree",opts.data);menu.elData("list",getFmtData(!opts.asTreeData))}else{menu.elData("list",opts.data);menu.elData("tree",getFmtData(!opts.asTreeData))}if(!lastOpts){for(var e in opts){menu.removeAttribute(e)}}menu.elData("lastOpts",opts)}function urlGetData(){var e=_this.options.url,t=_this.options.ajaxType,n=_this.options.ajaxData;if(e){var i=createRequest();i.onreadystatechange=function(){if(i.readyState===4&&i.status===200){_this.options.data=typeof i.responseText==="string"?JSON.parse(i.responseText):i.responseText}};if(t&&t.toLowerCase()==="post"){i.open("post",e,false);i.setRequestHeader("Content-type","application/json;charset=utf-8");i.send(JSON.stringify(n))}else{if(n){var r="";for(var o in n){r+="&"+o+"="+n[o]}e+=e.indexOf("?")!==-1?r:r.replace("&","?")}i.open("get",e,false);i.send(null)}}else{_this.options.data=[]}}function render(){_this.menu.innerHTML="";createItem(_this.getData(true),_this.menu,null,1);menuIndent();opts.onmenuready&&eval(opts.onmenuready)&&eval(opts.onmenuready)(_this)}function createLi(e){var t=opts.iconField?e[opts.iconField]?e[opts.iconField]:"noicon":"";var n=document.createElement("li");var i=document.createElement("a");var r=document.createElement("i");var o=document.createTextNode(e[opts.nameField]);i.setAttribute("class","menuitem");i.setAttribute("data-id",typeof e[opts.idField]==="string"?e[opts.idField].trim():e[opts.idField]);t&&r.setAttribute("class",t);i.appendChild(r);i.appendChild(o);n.appendChild(i);return n}function createItem(e,t,r,o){var s=document.createElement("ul");e.forEach(function(e){var t=createLi(e);var n={menu:_this.menu,target:t.querySelector("a.menuitem"),options:opts,node:copyObj(e),level:o,isLeaf:false};if(opts.childrenField in n.node)delete n.node[opts.childrenField];n.node[opts.parentField]=r;t.querySelector("a.menuitem").style.background=o<colorList.length+1?colorList[o-1]:colorList[colorList.length-1];t.querySelector(":scope>.menuitem").elData("sender",n);if(e[opts.childrenField]&&e[opts.childrenField].length>0){t.querySelector("a").classList.add("submenu");var i=o+1;createItem(e[opts.childrenField],t,e[opts.idField],i)}else{n.isLeaf=true}s.appendChild(t)});t.appendChild(s)}function menuIndent(){var e=_this.menu.querySelector(".accordion>ul"),t=0,i=parseFloat(opts.indentStep);i=isNaN(i)?1:i;r(e,t);function r(e,n){var t=e.querySelectorAll(":scope>li>ul");n=parseFloat(n)+i;t.forEach(function(e){var t=e.querySelectorAll(":scope>li>a");t.forEach(function(e){e.style.paddingLeft=n+"em"});r(e,n)})}}function bindEvent(){_this.menu.querySelectorAll("a.menuitem").forEach(function(e){removeEvent(e,"click",clickFn,true);removeEvent(e,"mouseenter",enterFn,true);removeEvent(e,"mouseleave",leaveFn,true);addEvent(e,"click",clickFn,true);addEvent(e,"mouseenter",enterFn,true);addEvent(e,"mouseleave",leaveFn,true)});function enterFn(e){this.setAttribute("title",this.innerText);opts.onnodemouseenter&&eval(opts.onnodemouseenter)(this.elData("sender"),e)}function leaveFn(e){this.removeAttribute("title");opts.onnodemouseleave&&eval(opts.onnodemouseleave)(this.elData("sender"),e)}function clickFn(e){var speed=_this.options.speed,_self=this;if(this.classList.contains("submenu")){if(this.classList.contains("iconopen")){this.parentNode.querySelectorAll(".iconopen,ul").forEach(function(e){e.tagName==="A"?e.classList.remove("iconopen"):e.slideUp(speed)})}else{this.classList.add("iconopen");this.parentNode.parentNode.querySelectorAll(":scope>li>a").forEach(function(e){if(e!==_self){e.parentNode.querySelectorAll(".iconopen,ul").forEach(function(e){e.tagName==="A"?e.classList.remove("iconopen"):e.slideUp(speed)})}else{var t=e.parentNode.querySelector("ul");t&&t.slideDown(speed)}})}}_this.menu.querySelectorAll("a.menuitem").forEach(function(e){e.classList.remove("activeitem")});this.classList.add("activeitem");opts.onnodeclick&&eval(opts.onnodeclick)(this.elData("sender"),e)}}function getFmtData(e){var t=copyObj(opts.data),n=[];e=typeof e==="undefined"?toBool(opts.asTreeData):toBool(e);if(e){for(var i=0;i<t.length;i++){var r=true;for(var o=0;o<t.length;o++){if(t[i][opts.idField]===t[o][opts.parentField]){r=false}}if(r){for(var s=0;s<t.length;s++){if(t[s][opts.idField]===t[i][opts.parentField]){if(!opts.childrenField in t[s]||!Array.isArray(t[s][opts.childrenField]))t[s][opts.childrenField]=[];if(opts.parentField in t[i])delete t[i][opts.parentField];t[s][opts.childrenField].push(t[i]);t.splice(i,1);i=-1;break}}}}for(var i=0;i<t.length;i++){if(opts.parentField in t[i])delete t[i][opts.parentField]}return sortTreeArr(t,opts.childrenField,opts.sortName,opts.sortOrder)}else{a(t,n,null);return sortArr(n,opts.sortOrder,opts.sortName)}function a(e,t,n){for(var i=0;i<e.length;i++){var r=copyObj(e[i]);r[opts.parentField]=opts.parentField in e[i]?e[i][opts.parentField]:n;if(opts.childrenField in r)delete r[opts.childrenField];t.push(r);if(opts.childrenField in e[i])a(e[i][opts.childrenField],t,e[i][opts.idField])}}}},getData:function(e){e=typeof e==="undefined"?toBool(this.options.asTreeData):toBool(e);return e?this.menu.elData("tree"):this.menu.elData("list")},getNode:function(e){var t=this.menu.querySelector("[data-id='"+e+"']");return t?t.elData("sender").node:null},getParentNode:function(e){return this.getNode(e[this.options.parentField])},getSelectNode:function(){return this.menu.querySelector("a.activeitem").elData("sender").node},getChildNodes:function(n,e,i){e=typeof e==="undefined"?toBool(this.options.asTreeData):toBool(e);i=toBool(i);var r=this.options,o=copyObj(this.getData(e)),s=[];if(e){l(o)}else{a(n[r.idField])}function a(e){for(var t=0;t<o.length;t++){if(o[t][r.parentField]===e){s.push(o[t]);i&&a(o[t][r.idField]);o.splice(t,1);t=0}}return s}function l(e){e.forEach(function(t){if(t[r.idField]===n[r.idField]){if(!(r.childrenField in t)||t[r.childrenField].length===0){s=[];return s}else{s=t[r.childrenField];if(!i){s.forEach(function(e){if(r.childrenField in t){delete e[r.childrenField]}})}return s}}else{if(r.childrenField in t&&t[r.childrenField].length>0){l(t[r.childrenField])}}})}return s}};return Accordion});
=======
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=e||self,e.Accordion=t())})(this,function(){"use strict";function extend(e,t,n){n=typeof n==="undefined"?true:toBool(n);for(var i in t){if(e.hasOwnProperty(i)&&!n)continue;e[i]=t[i]}return e}function toBool(e){return typeof e==="string"&&e.toLowerCase()==="false"?false:Boolean(e)}function addEvent(e,t,n,i){i=toBool(i);e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n,i):e["on"+t]=n}function removeEvent(e,t,n,i){i=toBool(i);e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n,i)}function parseObj(e,t){if(e&&typeof e==="object"){return e}else if(e&&typeof e==="string"){try{return JSON.parse(e)}catch(e){console.error(e.message)}}else{return t||null}}function copyObj(e){return JSON.parse(JSON.stringify(e))}function createRequest(){if(window.XMLHttpRequest){return new XMLHttpRequest}else if(window.ActiveXObject){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var t=0;t<e.length;t++){try{return new ActiveXObject(e[t])}catch(e){}}}return null}function gradientColors(e,t,n){var i=g(e);var r=i[0];var o=i[1];var s=i[2];var a=g(t);var l=a[0];var u=a[1];var d=a[2];var c=(l-r)/n;var p=(u-o)/n;var f=(d-s)/n;var h=[];for(var m=0;m<n;m++){var v=y("rgb("+parseInt(c*m+r)+","+parseInt(p*m+o)+","+parseInt(f*m+s)+")");h.push(v)}return h;function g(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var e=e.toLowerCase();if(e&&t.test(e)){if(e.length===4){var n="#";for(var i=1;i<4;i+=1){n+=e.slice(i,i+1).concat(e.slice(i,i+1))}e=n}var r=[];for(var i=1;i<7;i+=2){r.push(parseInt("0x"+e.slice(i,i+2)))}return r}else{return e}}function y(e){var t=e;var n=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(t)){var i=t.replace(/(?:(|)|rgb|RGB)*/g,"").split(",");var r="#";for(var o=0;o<i.length;o++){var s=Number(i[o]).toString(16);s=s<10?0+""+s:s;if(s==="0"){s+=s}r+=s}if(r.length!==7){r=t}return r}else if(n.test(t)){var a=t.replace(/#/,"").split("");if(a.length===6){return t}else if(a.length===3){var l="#";for(var o=0;o<a.length;o+=1){l+=a[o]+a[o]}return l}}else{return t}}}function sortTreeArr(e,t,n,i){i=i||"asc";if(!n)return e;var r=1;if(i&&i.toLowerCase()=="desc")r=-1;for(var o=0;o<e.length;o++){if(e[o][t])sortTreeArr(e[o][t],t,n,i)}sortArr(e,i,n);return e}function sortArr(e,t,r){r=r||"";var o=1;if(t&&t.toLowerCase()=="desc")o=-1;e.sort(function(e,t){var n,i;n=r?e[r]:e;i=r?t[r]:t;if(n>i){return 1*o}else if(n<i){return-1*o}else{return 0*o}});return e}HTMLElement.prototype.elData=function(e,t){var n="_elData",i=typeof e,r=typeof t;e=i==="string"?e.trim():e;if(i!=="undefined"&&r!=="undefined"){if(e===null||i==="number"||i==="boolean"){return this}if(!(n in this)){this[n]={}}this[n][e]=t;return this}if(i==="undefined"&&r==="undefined"){return this[n]||{}}if(i!=="undefined"&&r==="undefined"){return n in this&&e in this[n]?this[n][e]:undefined}};HTMLElement.prototype.delElData=function(e){var t=typeof e,n="_elData";e=t==="string"?e.trim():e;if(e===null||t==="number"||t==="boolean"){return this}if(t==="undefined"){if(n in this)delete this[n]}else{if(n in this&&e in this[n])delete this[n][e]}return this};HTMLElement.prototype.slideDown=function(e){var t=window.getComputedStyle?getComputedStyle(this,null)["display"]:this.currentStyle["display"];if(t==="none"){this.style.cssText="height:0;display:block"}var n=0,i=this.scrollHeight,r=this,o=(e?i/e:i/400)*30;if(!this.offsetHeight){var s=setInterval(function(){if(n===i){clearInterval(s);r.style.cssText="display:block"}else{n+=o;n=n>i?i:n;r.style.height=n+"px"}},30)}};HTMLElement.prototype.slideUp=function(e){var t=0,n=this.scrollHeight,i=this,r=(e?n/e:n/400)*30;if(this.offsetHeight){var o=setInterval(function(){if(n===t){clearInterval(o);i.style.cssText="display:none"}else{n-=r;n=n<t?t:n;i.style.height=n+"px"}},30)}};function Accordion(e,t){if(!(this instanceof Accordion)){return new Accordion(e,t)}this.menu=typeof e==="string"?document.querySelector(e):(typeof HTMLElement==="object"?e instanceof HTMLElement:e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string")?e:null;this.options={};this.menu.classList.add("accordion");this.init(t)}Accordion.prototype={constructor:Accordion,init:function(options){var lastOpts=this.menu.elData("lastOpts"),menu=this.menu;this.options=lastOpts||{idField:menu.getAttribute("idField")||"id",parentField:menu.getAttribute("parentField")||"pid",nameField:menu.getAttribute("nameField")||"name",iconField:menu.getAttribute("iconField")||"",sortName:menu.getAttribute("sortName")||"",sortOrder:menu.getAttribute("sortOrder")||"asc",childrenField:menu.getAttribute("childrenField")||"children",url:menu.getAttribute("url")||"",ajaxType:menu.getAttribute("ajaxType")||"get",ajaxData:menu.getAttribute("ajaxData")||null,asTreeData:menu.getAttribute("asTreeData")?toBool(menu.getAttribute("asTreeData")):true,data:menu.getAttribute("data")||null,indentStep:menu.getAttribute("indentStep")||1,startColor:menu.getAttribute("startColor")||"#18626b",endColor:menu.getAttribute("endColor")||"#2fb9ca",colorCount:menu.getAttribute("colorCount")||5,speed:menu.getAttribute("speed")||400,onnodeclick:eval(menu.getAttribute("onnodeclick"))||null,onnodemouseenter:eval(menu.getAttribute("onnodemouseenter"))||null,onnodemouseleave:eval(menu.getAttribute("onnodemouseleave"))||null,onmenuready:eval(menu.getAttribute("onmenuready"))||null};this.options=extend(this.options,options||{},true);var opts=this.options,_this=this,colorList=gradientColors(opts.startColor,opts.endColor,opts.colorCount);setOpts();render();bindEvent();return this;function setOpts(){opts.ajaxData=parseObj(opts.ajaxData);opts.data=parseObj(opts.data);if(!opts.data){urlInitData()}opts.data=getFmtData(opts.asTreeData);if(opts.asTreeData){menu.elData("tree",opts.data);menu.elData("list",getFmtData(!opts.asTreeData))}else{menu.elData("list",opts.data);menu.elData("tree",getFmtData(!opts.asTreeData))}if(!lastOpts){for(var e in opts){menu.removeAttribute(e)}}menu.elData("lastOpts",opts)}function urlInitData(){var e=_this.options.url,t=_this.options.ajaxType,n=_this.options.ajaxData;if(e){var i=createRequest();i.onreadystatechange=function(){if(i.readyState===4&&i.status===200){_this.options.data=typeof i.responseText==="string"?JSON.parse(i.responseText):i.responseText}};if(t&&t.toLowerCase()==="post"){i.open("post",e,false);i.setRequestHeader("Content-type","application/json;charset=utf-8");i.send(JSON.stringify(n))}else{if(n){var r="";for(var o in n){r+="&"+o+"="+n[o]}e+=e.indexOf("?")!==-1?r:r.replace("&","?")}i.open("get",e,false);i.send(null)}}else{_this.options.data=[]}}function render(){_this.menu.innerHTML="";createItem(_this.getData(true),_this.menu,null,1);menuIndent();opts.onmenuready&&eval(opts.onmenuready)&&eval(opts.onmenuready)(_this)}function createLi(e){var t=opts.iconField?e[opts.iconField]?e[opts.iconField]:"noicon":"";var n=document.createElement("li");var i=document.createElement("a");var r=document.createElement("i");var o=document.createTextNode(e[opts.nameField]);i.setAttribute("class","menuitem");i.setAttribute("data-id",typeof e[opts.idField]==="string"?e[opts.idField].trim():e[opts.idField]);t&&r.setAttribute("class",t);i.appendChild(r);i.appendChild(o);n.appendChild(i);return n}function createItem(e,t,r,o){var s=document.createElement("ul");e.forEach(function(e){var t=createLi(e);var n={menu:_this.menu,target:t.querySelector("a.menuitem"),options:opts,node:copyObj(e),level:o,isLeaf:false};if(opts.childrenField in n.node)delete n.node[opts.childrenField];n.node[opts.parentField]=r;t.querySelector("a.menuitem").style.background=o<colorList.length+1?colorList[o-1]:colorList[colorList.length-1];t.querySelector(":scope>.menuitem").elData("sender",n);if(e[opts.childrenField]&&e[opts.childrenField].length>0){t.querySelector("a").classList.add("submenu");var i=o+1;createItem(e[opts.childrenField],t,e[opts.idField],i)}else{n.isLeaf=true}s.appendChild(t)});t.appendChild(s)}function menuIndent(){var e=_this.menu.querySelector(".accordion>ul"),t=0,i=parseFloat(opts.indentStep);i=isNaN(i)?1:i;r(e,t);function r(e,n){var t=e.querySelectorAll(":scope>li>ul");n=parseFloat(n)+i;t.forEach(function(e){var t=e.querySelectorAll(":scope>li>a");t.forEach(function(e){e.style.paddingLeft=n+"em"});r(e,n)})}}function bindEvent(){_this.menu.querySelectorAll("a.menuitem").forEach(function(e){removeEvent(e,"click",clickFn,true);removeEvent(e,"mouseenter",enterFn,true);removeEvent(e,"mouseleave",leaveFn,true);addEvent(e,"click",clickFn,true);addEvent(e,"mouseenter",enterFn,true);addEvent(e,"mouseleave",leaveFn,true)});function enterFn(e){this.setAttribute("title",this.innerText);opts.onnodemouseenter&&eval(opts.onnodemouseenter)(this.elData("sender"),e)}function leaveFn(e){this.removeAttribute("title");opts.onnodemouseleave&&eval(opts.onnodemouseleave)(this.elData("sender"),e)}function clickFn(e){var speed=_this.options.speed,_self=this;if(this.classList.contains("submenu")){if(this.classList.contains("iconopen")){this.parentNode.querySelectorAll(".iconopen,ul").forEach(function(e){e.tagName==="A"?e.classList.remove("iconopen"):e.slideUp(speed)})}else{this.classList.add("iconopen");this.parentNode.parentNode.querySelectorAll(":scope>li>a").forEach(function(e){if(e!==_self){e.parentNode.querySelectorAll(".iconopen,ul").forEach(function(e){e.tagName==="A"?e.classList.remove("iconopen"):e.slideUp(speed)})}else{var t=e.parentNode.querySelector("ul");t&&t.slideDown(speed)}})}}_this.menu.querySelectorAll("a.menuitem").forEach(function(e){e.classList.remove("activeitem")});this.classList.add("activeitem");opts.onnodeclick&&eval(opts.onnodeclick)(this.elData("sender"),e)}}function getFmtData(e){var t=copyObj(opts.data),n=[];e=typeof e==="undefined"?toBool(opts.asTreeData):toBool(e);if(e){for(var i=0;i<t.length;i++){var r=true;for(var o=0;o<t.length;o++){if(t[i][opts.idField]===t[o][opts.parentField]){r=false}}if(r){for(var s=0;s<t.length;s++){if(t[s][opts.idField]===t[i][opts.parentField]){if(!opts.childrenField in t[s]||!Array.isArray(t[s][opts.childrenField]))t[s][opts.childrenField]=[];if(opts.parentField in t[i])delete t[i][opts.parentField];t[s][opts.childrenField].push(t[i]);t.splice(i,1);i=-1;break}}}}for(var i=0;i<t.length;i++){if(opts.parentField in t[i])delete t[i][opts.parentField]}return sortTreeArr(t,opts.childrenField,opts.sortName,opts.sortOrder)}else{a(t,n,null);return sortArr(n,opts.sortOrder,opts.sortName)}function a(e,t,n){for(var i=0;i<e.length;i++){var r=copyObj(e[i]);r[opts.parentField]=opts.parentField in e[i]?e[i][opts.parentField]:n;if(opts.childrenField in r)delete r[opts.childrenField];t.push(r);if(opts.childrenField in e[i])a(e[i][opts.childrenField],t,e[i][opts.idField])}}}},getData:function(e){e=typeof e==="undefined"?toBool(this.options.asTreeData):toBool(e);return e?this.menu.elData("tree"):this.menu.elData("list")},getNode:function(e){var t=this.menu.querySelector("[data-id='"+e+"']");return t?t.elData("sender").node:null},getParentNode:function(e){return this.getNode(e[this.options.parentField])},getSelectNode:function(){return this.menu.querySelector("a.activeitem").elData("sender").node},getChildNodes:function(n,e,i){e=typeof e==="undefined"?toBool(this.options.asTreeData):toBool(e);i=toBool(i);var r=this.options,o=copyObj(this.getData(e)),s=[];if(e){l(o)}else{a(n[r.idField])}function a(e){for(var t=0;t<o.length;t++){if(o[t][r.parentField]===e){s.push(o[t]);i&&a(o[t][r.idField]);o.splice(t,1);t=0}}return s}function l(e){e.forEach(function(t){if(t[r.idField]===n[r.idField]){if(!(r.childrenField in t)||t[r.childrenField].length===0){s=[];return s}else{s=t[r.childrenField];if(!i){s.forEach(function(e){if(r.childrenField in t){delete e[r.childrenField]}})}return s}}else{if(r.childrenField in t&&t[r.childrenField].length>0){l(t[r.childrenField])}}})}return s}};return Accordion});
>>>>>>> 1886af575494feeaa861d8b63e7415a68885d4ef
